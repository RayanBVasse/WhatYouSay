<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>What You Say - Level-B intro</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="..." />
	<meta name="keywords" content="... .." />
	<meta name="author" content=".." />

  <link rel="stylesheet" href="/static/css/main.css">
  <link rel="stylesheet" href="/static/css/forms.css">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
	#log-window {
  background: #150753;
  color: #0f0;
  font-family: monospace;
  height: 300px;
  overflow-y: auto;
  padding: 10px;
  display: none;
}
</style>
	
</head>
<body>
<div id="page-wrapper">
  <!-- Header -->
				<div id="header-wrapper">
					<div class="container">
						<div class="row">
							<div class="col-12">

								<header id="header">
									<h1><a href="index.html" id="logo">WhatYouSay</a></h1>
									<nav id="nav">
										<a href="{{ url_for('index') }}">Homepage</a>
                                        <a href="#">Method</a>
                                        <a href="#">Publication</a>
                                        <a href="#">Privacy</a>
                                        <a href="#">HowWeConnect</a>

									</nav>
								</header>

							</div>
						</div>
					</div>
				</div>

       <!-- Main -->

  <div id="main">
					<div class="container">
						<div class="row main-row">
							<div class="col-12">
                
              <section>

              <h2>Welcome to Level B</h2>
                <p>
                “This section explores how the speaker’s language is experienced, not what it means psychologically.”

                Emphasise patterns, not diagnosis.
                </p>
                
                <h4>What changes here</h4>
                <br>
                
                <p>
                deeper drill-down of Level A signals
                <br>
                contextual comparison (“relative to other participants in the same conversation”)
                <br>
                examples drawn directly from the speaker’s own text
                </p>

                <h4>Runtime notice</h4>
                <br>
                <p>
                Depending on conversation size, this may take <strong>10–60 seconds.</strong>
                <br>
                “Please <strong>do not</strong> refresh.”
                </p>

                <h4>Privacy reassurance</h4>
                <br><p>
                “No text is stored.”

                “All processing happens in memory.”

                “Leaving the page clears results.”
                </p>
                <p>

                <h4>Download warning (future-proofing)</h4>
                <br><p>
                “If you later download a report, that file is generated on demand.”
                <br>
                </p>

                <p>
                <h4>Explicit consent</h4>
                
                </p>

                Button disabled until checked.</pre>
                <br>
                <hr>
				<label>
					<input type="checkbox" id="consentChk" required style="transform: scale(1.4);">
					I understand this analysis may take 15-45 seconds and should not be refreshed.
				</label>
				<br><br>
				<div id="log-window"></div>
				<button id="startBtn" type="button" class="button">
					Proceed to Level B analysis
				</button>
				<hr><br>
                <form action="{{ url_for('delete_and_exit') }}" method="post">
                  <button type="submit" class="button" >Delete & Exit</button>
                </form>

                <button disabled class="button" >Download ZIP (coming next)</button>
          </section>


<script>
		const startBtn = document.getElementById("startBtn");
		const logWindow = document.getElementById("log-window");

		startBtn.onclick = async (e) => {
			e.preventDefault();
	// Show live log window
			logWindow.style.display = "block";	
	// 1) Tell Flask to START Level B
			await fetch("/ReflectIQ/start_levelB/{{ safe_user }}", {
				method: "POST"
			});
    // 2) Open a live stream to READ Level B output
    	const evt = new EventSource("/ReflectIQ/stream_levelB/{{ safe_user }}");

		evt.onmessage = (e) => {
				if (e.data === "__DONE__") {
				evt.close();
				setTimeout(() => {
					window.location.href = "/ReflectIQ/levelB_results/{{ safe_user }}";
					}, 800);
				return;
			}
				logWindow.innerHTML += e.data + "<br>";
				logWindow.scrollTop = logWindow.scrollHeight;
			};
		}; 
</script>
            
			<!-- Footer -->
				<div id="footer-wrapper">
					<div class="container">
						<div class="row">
							<div class="col-8 col-12-medium">

								<section>
									<h2>How about a truckload of links?</h2>
									<div>
										<div class="row">
											<div class="col-3 col-6-medium col-12-small">
												<ul class="link-list">
													<li><a href="#">Sed neque nisi consequat</a></li>
													<li><a href="#">Dapibus sed mattis blandit</a></li>
													<li><a href="#">Quis accumsan lorem</a></li>
													<li><a href="#">Suspendisse varius ipsum</a></li>
													<li><a href="#">Eget et amet consequat</a></li>
												</ul>
											</div>
											<div class="col-3 col-6-medium col-12-small">
												<ul class="link-list">
													<li><a href="#">Quis accumsan lorem</a></li>
													<li><a href="#">Sed neque nisi consequat</a></li>
													<li><a href="#">Eget et amet consequat</a></li>
													<li><a href="#">Dapibus sed mattis blandit</a></li>
													<li><a href="#">Vitae magna sed dolore</a></li>
												</ul>
											</div>
											<div class="col-3 col-6-medium col-12-small">
												<ul class="link-list">
													<li><a href="#">Sed neque nisi consequat</a></li>
													<li><a href="#">Dapibus sed mattis blandit</a></li>
													<li><a href="#">Quis accumsan lorem</a></li>
													<li><a href="#">Suspendisse varius ipsum</a></li>
													<li><a href="#">Eget et amet consequat</a></li>
												</ul>
											</div>
											<div class="col-3 col-6-medium col-12-small">
												<ul class="link-list">
													<li><a href="#">Quis accumsan lorem</a></li>
													<li><a href="#">Sed neque nisi consequat</a></li>
													<li><a href="#">Eget et amet consequat</a></li>
													<li><a href="#">Dapibus sed mattis blandit</a></li>
													<li><a href="#">Vitae magna sed dolore</a></li>
												</ul>
											</div>
										</div>
									</div>
								</section>

							</div>
							<div class="col-4 col-12-medium">

								<section>
									<h2>Something of interest</h2>
									<p>Duis neque nisi, dapibus sed mattis quis, rutrum accumsan sed.
									Suspendisse eu varius nibh. Suspendisse vitae magna eget odio amet
									mollis justo facilisis quis. Sed sagittis mauris amet tellus gravida
									lorem ipsum dolor sit blandit.</p>
									<footer class="controls">
										<a href="#" class="button">Oh, please continue ....</a>
									</footer>
								</section>

							</div>
						</div>
						<div class="row">
							<div class="col-12">

								<div id="copyright">
									&copy; Untitled. All rights reserved. | Design: <a href="http://html5up.net">HTML5 UP</a>
								</div>

							</div>
						</div>
					</div>
				</div>



<!-- Scripts -->
			<script src="/static/js/jquery.min.js"></script>
            <script src="/static/js/browser.min.js"></script>
            <script src="/static/js/breakpoints.min.js"></script>
            <script src="/static/js/util.js"></script>
            <script src="{{ url_for('static', filename='js//main.js') }}"></script>
</body>
</html>




